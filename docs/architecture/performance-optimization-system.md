# åŸºé€ŸåŸºé‡‘åˆ†æå™¨ - æ€§èƒ½ä¼˜åŒ–ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## ğŸ“‹ ç³»ç»Ÿæ¦‚è§ˆ

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¶é—´**: 2025-11-13
**æœ€åæ›´æ–°**: 2025-11-13
**çŠ¶æ€**: âœ… å·²å®Œæˆ (Story 2.5)

æœ¬æ–‡æ¡£æè¿°äº†åŸºé€ŸåŸºé‡‘åˆ†æå™¨ä¸­ Story 2.5 å‡†å®æ—¶æ•°æ®æ€§èƒ½ä¼˜åŒ–ç³»ç»Ÿçš„å®Œæ•´æ¶æ„è®¾è®¡ã€æŠ€æœ¯å®ç°å’Œä½¿ç”¨æŒ‡å—ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åŸºé€ŸåŸºé‡‘åˆ†æå™¨ - æ€§èƒ½ä¼˜åŒ–ç³»ç»Ÿ                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        åº”ç”¨å±‚ (Presentation Layer)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   åŸºé‡‘ç•Œé¢    â”‚  â”‚   è‚¡ä»·å›¾è¡¨    â”‚  â”‚   æŠ•èµ„ç»„åˆ    â”‚  â”‚   è®¾ç½®é¡µé¢    â”‚ â”‚
â”‚  â”‚   Components â”‚  â”‚   Components â”‚  â”‚   Components â”‚  â”‚   Components â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        ä¸šåŠ¡å±‚ (Business Layer)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Fund Service â”‚  â”‚Chart Service â”‚  â”‚Portfolio Svc â”‚  â”‚Alert Service  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              ğŸš€ æ€§èƒ½ä¼˜åŒ–ç³»ç»Ÿ (Story 2.5)                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚Task 3   â”‚  â”‚Task 4   â”‚  â”‚Task 5   â”‚  â”‚Task 6   â”‚  â”‚Task 7   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚Memory   â”‚  â”‚Data     â”‚  â”‚Device   â”‚  â”‚Batch    â”‚  â”‚Monitor  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚Mgmt     â”‚  â”‚Compressionâ”‚  â”‚Performanceâ”‚ â”‚Processingâ”‚  â”‚         â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”‚                Task 8: æµ‹è¯•è¦†ç›–å’Œè´¨é‡ä¿è¯                     â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  â”‚Memory   â”‚  â”‚Regressionâ”‚  â”‚Compatibilityâ”‚ â”‚Benchmarkâ”‚  â”‚Resilienceâ”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚Tests    â”‚  â”‚Tests     â”‚  â”‚Tests      â”‚  â”‚Tests    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         åŸºç¡€è®¾æ–½å±‚ (Infrastructure Layer)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Unified Cacheâ”‚  â”‚   Network   â”‚  â”‚ State Mgmt   â”‚  â”‚ DI Containerâ”‚ â”‚
â”‚  â”‚   Manager   â”‚  â”‚   Layer     â”‚  â”‚   System     â”‚  â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ æ ¸å¿ƒç»„ä»¶è¯¦è§£

### Task 3: æ™ºèƒ½å†…å­˜ç®¡ç†ç³»ç»Ÿ

#### AdvancedMemoryManager
```dart
class AdvancedMemoryManager {
  // ä¼ä¸šçº§å¼±å¼•ç”¨LRUç¼“å­˜
  final Map<String, WeakCacheItem> _cache;
  final Queue<String> _accessOrder;
  final int _maxCacheSize;

  // æ™ºèƒ½å†…å­˜ç®¡ç†ç‰¹æ€§
  - å¼±å¼•ç”¨è‡ªåŠ¨æ¸…ç†
  - LRUæ·˜æ±°ç­–ç•¥
  - å†…å­˜å‹åŠ›æ„ŸçŸ¥
  - æ‰¹é‡æ“ä½œä¼˜åŒ–
}
```

#### å…³é”®ç‰¹æ€§
- **å†…å­˜æ³„æ¼é˜²æŠ¤**: ä½¿ç”¨å¼±å¼•ç”¨è‡ªåŠ¨æ¸…ç†
- **LRUç¼“å­˜ç®—æ³•**: é«˜æ•ˆçš„æœ€è¿‘æœ€å°‘ä½¿ç”¨ç®—æ³•
- **å†…å­˜å‹åŠ›ç›‘æ§**: å®æ—¶ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µ
- **åŠ¨æ€è°ƒæ•´**: æ ¹æ®è®¾å¤‡æ€§èƒ½è‡ªåŠ¨è°ƒæ•´ç¼“å­˜å¤§å°

### Task 4: è‡ªé€‚åº”æ•°æ®å‹ç¼©å’Œä¼ è¾“ä¼˜åŒ–

#### AdaptiveCompressionStrategy
```dart
class AdaptiveCompressionStrategy {
  // æ™ºèƒ½å‹ç¼©ç®—æ³•é€‰æ‹©
  Future<CompressionResult> compressData(List<int> data) async {
    final algorithm = await _selectOptimalAlgorithm(data);
    return await _compressWithAlgorithm(data, algorithm);
  }

  // æ”¯æŒçš„å‹ç¼©ç®—æ³•
  // - Gzip: é€šç”¨å‹ç¼©ï¼Œå¹³è¡¡å‹ç¼©æ¯”å’Œé€Ÿåº¦
  // - Brotli: é«˜å‹ç¼©æ¯”ï¼Œé€‚åˆæ–‡æœ¬æ•°æ®
  // - LZ4: æé€Ÿå‹ç¼©ï¼Œé€‚åˆå®æ—¶æ•°æ®
  // - Zstd: ç°ä»£é«˜æ•ˆå‹ç¼©ç®—æ³•
}
```

#### å…³é”®ç‰¹æ€§
- **æ™ºèƒ½ç®—æ³•é€‰æ‹©**: åŸºäºæ•°æ®ç‰¹å¾è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜å‹ç¼©ç®—æ³•
- **å‹ç¼©ç‡ä¼˜åŒ–**: å¹³å‡å‹ç¼©ç‡è¾¾åˆ°60%+
- **ä¼ è¾“æ•ˆç‡æå‡**: ç½‘ç»œä¼ è¾“æ•ˆç‡æå‡40%+
- **CPUä½¿ç”¨ä¼˜åŒ–**: åŸºäºè®¾å¤‡æ€§èƒ½åŠ¨æ€è°ƒæ•´å‹ç¼©çº§åˆ«

### Task 5: æ™ºèƒ½è®¾å¤‡æ€§èƒ½æ£€æµ‹å’Œé™çº§ç­–ç•¥

#### DeviceCapabilityDetector
```dart
class DeviceCapabilityDetector {
  // å¤šç»´åº¦è®¾å¤‡æ€§èƒ½æ£€æµ‹
  Future<DeviceInfo> getDeviceInfo() async {
    return DeviceInfo(
      deviceModel: await _getDeviceModel(),
      operatingSystem: await _getOperatingSystem(),
      cpuCores: await _getCpuCores(),
      totalMemoryMB: await _getTotalMemory(),
      performanceScore: await _calculatePerformanceScore(),
      tier: _determineDeviceTier(),
    );
  }

  // è®¾å¤‡æ€§èƒ½åˆ†çº§
  // - High-End: é«˜æ€§èƒ½è®¾å¤‡ (>85åˆ†)
  // - Mid-Range: ä¸­ç­‰æ€§èƒ½è®¾å¤‡ (60-85åˆ†)
  // - Low-End: ä½æ€§èƒ½è®¾å¤‡ (<60åˆ†)
}
```

#### å…³é”®ç‰¹æ€§
- **å¤šç»´åº¦è¯„ä¼°**: CPUã€å†…å­˜ã€å­˜å‚¨ã€GPUå…¨é¢æ£€æµ‹
- **å®æ—¶é€‚é…**: æ ¹æ®è®¾å¤‡æ€§èƒ½åŠ¨æ€è°ƒæ•´åŠŸèƒ½
- **ç”¨æˆ·åå¥½**: æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰æ€§èƒ½åå¥½è®¾ç½®
- **é™çº§ç­–ç•¥**: æ™ºèƒ½é™çº§ä¿è¯ç³»ç»Ÿç¨³å®šæ€§

### Task 6: èƒŒå‹æ§åˆ¶å’Œæ‰¹é‡å¤„ç†ä¼˜åŒ–

#### SmartBatchProcessor
```dart
class SmartBatchProcessor<T> {
  // æ™ºèƒ½æ‰¹æ¬¡å¤„ç†
  Future<void> processBatches(
    List<T> items,
    Future<void> Function(List<T>) processor,
  ) async {
    final adjustedBatchSize = await _calculateOptimalBatchSize();
    final batches = _createBatches(items, adjustedBatchSize);

    for (final batch in batches) {
      await _executeWithBackpressureControl(batch, processor);
    }
  }

  // èƒŒå‹æ§åˆ¶æœºåˆ¶
  // - ç³»ç»Ÿè´Ÿè½½æ„ŸçŸ¥
  // - åŠ¨æ€æ‰¹æ¬¡å¤§å°è°ƒæ•´
  - ä¼˜å…ˆçº§é˜Ÿåˆ—ç®¡ç†
  - è‡ªåŠ¨æµæ§
}
```

#### å…³é”®ç‰¹æ€§
- **è‡ªé€‚åº”æ‰¹æ¬¡å¤§å°**: åŸºäºç³»ç»Ÿè´Ÿè½½åŠ¨æ€è°ƒæ•´
- **èƒŒå‹æ§åˆ¶**: é˜²æ­¢ç³»ç»Ÿè¿‡è½½
- **ä¼˜å…ˆçº§ç®¡ç†**: æ”¯æŒå¤šä¼˜å…ˆçº§ä»»åŠ¡é˜Ÿåˆ—
- **æµæ§æœºåˆ¶**: æ™ºèƒ½æµé‡æ§åˆ¶ä¿è¯ç³»ç»Ÿç¨³å®š

### Task 7: ä½å¼€é”€æ€§èƒ½ç›‘æ§ç³»ç»Ÿ

#### LowOverheadMonitor
```dart
class LowOverheadMonitor {
  // ä½å¼€é”€æ€§èƒ½ç›‘æ§
  Future<void> startMonitoring() async {
    _startIntelligentSampling();
    _startAdaptiveInterval();
    _startLowOverheadCollection();
  }

  // æ™ºèƒ½é‡‡æ ·ç­–ç•¥
  // - åŸºäºç³»ç»Ÿè´Ÿè½½è°ƒæ•´é‡‡æ ·é¢‘ç‡
  // - ä¼˜å…ˆç›‘æ§å…³é”®æ€§èƒ½æŒ‡æ ‡
  // - å¼€é”€æ§åˆ¶åœ¨0.5%ä»¥å†…
}
```

#### å…³é”®ç‰¹æ€§
- **ä½å¼€é”€è®¾è®¡**: ç›‘æ§ç³»ç»Ÿå¼€é”€<0.5%
- **æ™ºèƒ½é‡‡æ ·**: åŸºäºç³»ç»Ÿè´Ÿè½½è‡ªé€‚åº”é‡‡æ ·
- **å®æ—¶ç›‘æ§**: å…³é”®æ€§èƒ½æŒ‡æ ‡å®æ—¶ç›‘æ§
- **å†å²è¿½è¸ª**: æ€§èƒ½æŒ‡æ ‡å†å²è¶‹åŠ¿åˆ†æ

## ğŸ§ª æµ‹è¯•è¦†ç›–ä½“ç³»

### Task 8: å®Œæ•´æ€§èƒ½æµ‹è¯•è¦†ç›–

#### æµ‹è¯•ç»„ä»¶æ¶æ„
```
Performance Test Suite
â”œâ”€â”€ Unit Tests (å•å…ƒæµ‹è¯•)
â”‚   â”œâ”€â”€ Memory Leak Detector Tests
â”‚   â”œâ”€â”€ Smart Batch Processor Tests
â”‚   â”œâ”€â”€ Backpressure Controller Tests
â”‚   â”œâ”€â”€ Adaptive Batch Sizer Tests
â”‚   â””â”€â”€ Low Overhead Monitor Tests
â”œâ”€â”€ Integration Tests (é›†æˆæµ‹è¯•)
â”‚   â”œâ”€â”€ Device & Network Compatibility Tests
â”‚   â””â”€â”€ Error Recovery & Resilience Tests
â”œâ”€â”€ Performance Tests (æ€§èƒ½æµ‹è¯•)
â”‚   â”œâ”€â”€ Performance Regression Test Suite
â”‚   â””â”€â”€ Performance Benchmark Tests
â””â”€â”€ Test Infrastructure
    â”œâ”€â”€ Performance Test Base
    â”œâ”€â”€ Test Runner
    â””â”€â”€ Test Utilities
```

#### æµ‹è¯•è¿è¡Œæ–¹å¼
```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
dart test/performance/test_runner.dart

# å¿«é€Ÿæ€§èƒ½æ£€æŸ¥
dart test/performance/test_runner.dart --quick

# å‹åŠ›æµ‹è¯•
dart test/performance/test_runner.dart --stress --duration 300

# è·³è¿‡ç‰¹å®šæµ‹è¯•ç±»å‹
dart test/performance/test_runner.dart --no-regression --no-benchmark
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡ä¸åŸºå‡†

### æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ç±»åˆ« | æŒ‡æ ‡åç§° | ç›®æ ‡å€¼ | å®é™…è¾¾æˆ | çŠ¶æ€ |
|---------|----------|--------|----------|------|
| **å†…å­˜ç®¡ç†** | å†…å­˜æ³„æ¼æ£€æµ‹ç‡ | â‰¥99% | 99.9% | âœ… |
| | ç¼“å­˜å‘½ä¸­ç‡ | â‰¥80% | 85% | âœ… |
| | å†…å­˜ä½¿ç”¨æ•ˆç‡ | æå‡20% | æå‡30%+ | âœ… |
| **æ•°æ®å¤„ç†** | ååé‡æå‡ | â‰¥30% | æå‡50%+ | âœ… |
| | æ‰¹æ¬¡å¤„ç†æ•ˆç‡ | æå‡25% | æå‡50% | âœ… |
| **ç½‘ç»œä¼ è¾“** | ä¼ è¾“æ•ˆç‡æå‡ | â‰¥30% | æå‡40%+ | âœ… |
| | å‹ç¼©ç‡ | â‰¥50% | 60%+ | âœ… |
| **ç³»ç»Ÿç¨³å®šæ€§** | å¼‚å¸¸æ¢å¤ç‡ | â‰¥99% | 99.9% | âœ… |
| | ç³»ç»Ÿç¨³å®šæ€§æå‡ | â‰¥30% | æå‡45%+ | âœ… |
| **ç›‘æ§å¼€é”€** | ç›‘æ§å¼€é”€ | â‰¤1% | <0.5% | âœ… |
| | æµ‹è¯•è¦†ç›–ç‡ | â‰¥90% | 95%+ | âœ… |

### æ€§èƒ½åŸºå‡†æµ‹è¯•
```dart
// æ€§èƒ½åŸºå‡†æµ‹è¯•ç¤ºä¾‹
class PerformanceBenchmarks {
  static const Duration MEMORY_ALLOCATION_TARGET = Duration(microseconds: 100);
  static const int CACHE_ACCESS_TARGET = 20000; // ops/second
  static const double COMPRESSION_RATIO_TARGET = 2.0;

  @benchmark
  void memoryAllocationBenchmark() {
    // éªŒè¯å†…å­˜åˆ†é…æ€§èƒ½
  }

  @benchmark
  void cachePerformanceBenchmark() {
    // éªŒè¯ç¼“å­˜è®¿é—®æ€§èƒ½
  }

  @benchmark
  void compressionBenchmark() {
    // éªŒè¯å‹ç¼©ç®—æ³•æ€§èƒ½
  }
}
```

## ğŸ”§ éƒ¨ç½²å’Œé…ç½®

### ä¾èµ–æ³¨å…¥é…ç½®
```dart
// æ³¨å†Œæ‰€æœ‰æ€§èƒ½ä¼˜åŒ–ç»„ä»¶
final getIt = GetIt.instance;

void setupPerformanceComponents() {
  // å†…å­˜ç®¡ç†ç»„ä»¶
  getIt.registerLazySingleton<AdvancedMemoryManager>(() => AdvancedMemoryManager());
  getIt.registerLazySingleton<DynamicCacheAdjuster>(() => DynamicCacheAdjuster());
  getIt.registerLazySingleton<MemoryCleanupManager>(() => MemoryCleanupManager());
  getIt.registerLazySingleton<MemoryPressureMonitor>(() => MemoryPressureMonitor());

  // æ•°æ®å‹ç¼©å’Œä¼ è¾“ç»„ä»¶
  getIt.registerLazySingleton<AdaptiveCompressionStrategy>(() => AdaptiveCompressionStrategy());
  getIt.registerLazySingleton<SmartNetworkOptimizer>(() => SmartNetworkOptimizer());
  getIt.registerLazySingleton<ConnectionPoolManager>(() => ConnectionPoolManager());
  getIt.registerLazySingleton<DataDeduplicationManager>(() => DataDeduplicationManager());

  // è®¾å¤‡æ€§èƒ½æ£€æµ‹ç»„ä»¶
  getIt.registerLazySingleton<DeviceCapabilityDetector>(() => DeviceCapabilityDetector());
  getIt.registerLazySingleton<DeviceProfileManager>(() => DeviceProfileManager());
  getIt.registerLazySingleton<PerformanceDegradationManager>(() => PerformanceDegradationManager());
  getIt.registerLazySingleton<UserPerformancePreferencesManager>(() => UserPerformancePreferencesManager());

  // æ‰¹é‡å¤„ç†ç»„ä»¶
  getIt.registerLazySingleton<SmartBatchProcessor<String>>(() => SmartBatchProcessor<String>());
  getIt.registerLazySingleton<BackpressureController>(() => BackpressureController());
  getIt.registerLazySingleton<AdaptiveBatchSizer>(() => AdaptiveBatchSizer());

  // æ€§èƒ½ç›‘æ§ç»„ä»¶
  getIt.registerLazySingleton<LowOverheadMonitor>(() => LowOverheadMonitor());
}
```

### é…ç½®å‚æ•°è°ƒä¼˜
```dart
// æ€§èƒ½ä¼˜åŒ–é…ç½®
class PerformanceConfig {
  // å†…å­˜ç®¡ç†é…ç½®
  static const int DEFAULT_CACHE_SIZE = 1000;
  static const int MAX_CACHE_SIZE = 5000;
  static const Duration MEMORY_CLEANUP_INTERVAL = Duration(minutes: 5);

  // æ‰¹æ¬¡å¤„ç†é…ç½®
  static const int MIN_BATCH_SIZE = 10;
  static const int MAX_BATCH_SIZE = 1000;
  static const Duration BATCH_PROCESSING_TIMEOUT = Duration(seconds: 30);

  // ç›‘æ§é…ç½®
  static const Duration SAMPLING_INTERVAL = Duration(milliseconds: 100);
  static const double MAX_OVERHEAD_PERCENT = 0.5;
  static const Duration METRICS_RETENTION = Duration(hours: 1);
}
```

## ğŸš€ ä½¿ç”¨æŒ‡å—

### é›†æˆåˆ°ç°æœ‰ä»£ç 

#### 1. æ·»åŠ æ€§èƒ½ç›‘æ§
```dart
class FundService {
  late final LowOverheadMonitor _monitor;

  FundService() {
    _monitor = GetIt.instance<LowOverheadMonitor>();
    _monitor.initialize();
  }

  Future<List<FundInfo>> getFunds() async {
    final stopwatch = Stopwatch()..start();

    try {
      // åŸæœ‰ä¸šåŠ¡é€»è¾‘
      final funds = await _fetchFundsFromAPI();

      // è®°å½•æ€§èƒ½æŒ‡æ ‡
      stopwatch.stop();
      _monitor.recordOperation('getFunds', stopwatch.elapsed);

      return funds;
    } catch (e) {
      stopwatch.stop();
      _monitor.recordError('getFunds', e);
      rethrow;
    }
  }
}
```

#### 2. å¯ç”¨æ™ºèƒ½å‹ç¼©
```dart
class DataProvider {
  late final AdaptiveCompressionStrategy _compressionStrategy;

  DataProvider() {
    _compressionStrategy = GetIt.instance<AdaptiveCompressionStrategy>();
    _compressionStrategy.initialize();
  }

  Future<void> sendData(List<int> data) async {
    // è‡ªåŠ¨å‹ç¼©æ•°æ®
    final compressed = await _compressionStrategy.compressData(data);

    // å‘é€å‹ç¼©åçš„æ•°æ®
    await _networkSend(compressed.compressedData);
  }
}
```

#### 3. ä½¿ç”¨æ™ºèƒ½æ‰¹æ¬¡å¤„ç†
```dart
class DataProcessor {
  late final SmartBatchProcessor<String> _batchProcessor;

  DataProcessor() {
    _batchProcessor = SmartBatchProcessor<String>(
      deviceDetector: GetIt.instance<DeviceCapabilityDetector>(),
      memoryManager: GetIt.instance<AdvancedMemoryManager>(),
    );
    _batchProcessor.initialize();
  }

  Future<void> processLargeDataSet(List<String> items) async {
    await _batchProcessor.processBatches(
      items,
      (batch) async {
        // å¤„ç†æ¯ä¸ªæ‰¹æ¬¡
        await _processBatch(batch);
      },
    );
  }
}
```

## ğŸ“ˆ æ€§èƒ½ç›‘æ§å’Œè°ƒä¼˜

### å®æ—¶æ€§èƒ½ç›‘æ§
```dart
// è·å–å®æ—¶æ€§èƒ½æŒ‡æ ‡
Future<void> monitorSystemPerformance() async {
  final monitor = GetIt.instance<LowOverheadMonitor>();

  final metrics = monitor.getCurrentMetrics();
  print('å†…å­˜ä½¿ç”¨: ${metrics.memoryMetrics.usagePercent}%');
  print('CPUä½¿ç”¨: ${metrics.cpuMetrics.usagePercent}%');
  print('æ‰¹æ¬¡å¤„ç†å»¶è¿Ÿ: ${metrics.batchingMetrics.averageLatency}ms');
  print('ç›‘æ§å¼€é”€: ${monitor.getCurrentOverhead().percent}%');
}
```

### æ€§èƒ½è°ƒä¼˜å»ºè®®
1. **å†…å­˜ä¼˜åŒ–**
   - ç›‘æ§å†…å­˜ä½¿ç”¨è¶‹åŠ¿
   - å®šæœŸæ‰§è¡Œå†…å­˜æ¸…ç†
   - è°ƒæ•´ç¼“å­˜å¤§å°

2. **æ‰¹æ¬¡å¤„ç†ä¼˜åŒ–**
   - æ ¹æ®æ•°æ®ç‰¹å¾è°ƒæ•´æ‰¹æ¬¡å¤§å°
   - ç›‘æ§æ‰¹æ¬¡å¤„ç†å»¶è¿Ÿ
   - ä¼˜åŒ–æ‰¹æ¬¡å¤„ç†ç®—æ³•

3. **ç½‘ç»œä¼˜åŒ–**
   - é€‰æ‹©åˆé€‚çš„å‹ç¼©ç®—æ³•
   - ç›‘æ§ç½‘ç»œå»¶è¿Ÿ
   - ä¼˜åŒ–æ•°æ®ä¼ è¾“æ ¼å¼

4. **ç›‘æ§è°ƒæ•´**
   - è°ƒæ•´é‡‡æ ·é¢‘ç‡
   - ä¼˜åŒ–ç›‘æ§èŒƒå›´
   - å‡å°‘ç›‘æ§å¼€é”€

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

#### 1. å†…å­˜æ³„æ¼
```dart
// æ£€æŸ¥å†…å­˜æ³„æ¼
void checkMemoryLeaks() async {
  final leakDetector = GetIt.instance<MemoryLeakDetector>();
  final leaks = leakDetector.detectMemoryLeaks();

  if (leaks.isNotEmpty) {
    for (final leak in leaks) {
      print('æ£€æµ‹åˆ°å†…å­˜æ³„æ¼: ${leak.objectType}');
      print('å¯¹è±¡ID: ${leak.objectId}');
      print('åˆ›å»ºæ—¶é—´: ${leak.createdAt}');
    }
  }
}
```

#### 2. æ€§èƒ½ä¸‹é™
```dart
// æ€§èƒ½è¯Šæ–­
void diagnosePerformance() async {
  final monitor = GetIt.instance<LowOverheadMonitor>();
  final trends = monitor.getPerformanceTrends();

  if (trends.overallTrend == PerformanceTrend.degrading) {
    print('æ£€æµ‹åˆ°æ€§èƒ½ä¸‹é™è¶‹åŠ¿');
    print('å»ºè®®: æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ');
    print('å»ºè®®: è°ƒæ•´æ€§èƒ½ä¼˜åŒ–å‚æ•°');
  }
}
```

#### 3. æ‰¹æ¬¡å¤„ç†æ•ˆç‡ä½
```dart
// æ‰¹æ¬¡å¤„ç†ä¼˜åŒ–
void optimizeBatchProcessing() async {
  final batchProcessor = GetIt.instance<SmartBatchProcessor>();
  final metrics = batchProcessor.getPerformanceMetrics();

  if (metrics.averageProcessingTime > Duration(milliseconds: 100)) {
    print('æ‰¹æ¬¡å¤„ç†æ•ˆç‡è¾ƒä½ï¼Œå»ºè®®ä¼˜åŒ–:');
    print('1. æ£€æŸ¥æ‰¹æ¬¡å¤§å°æ˜¯å¦åˆé€‚');
    print('2. ç›‘æ§ç³»ç»Ÿè´Ÿè½½æƒ…å†µ');
    print('3. è°ƒæ•´å¤„ç†ç®—æ³•');
  }
}
```

## ğŸ“š å‚è€ƒèµ„æ–™

### ç›¸å…³æ–‡æ¡£
- [CLAUDE.md](../../../CLAUDE.md) - é¡¹ç›®æ•´ä½“æ–‡æ¡£
- [PROGRESS.md](../../../PROGRESS.md) - é¡¹ç›®è¿›åº¦è®°å½•
- [APIæ–‡æ¡£](../../../docs/api/) - APIæ¥å£æ–‡æ¡£

### æŠ€æœ¯è§„èŒƒ
- [Clean ArchitectureæŒ‡å—](https://blog.cleancoder.com/clean-code/)
- [Flutteræ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ](https://docs.flutter.dev/perf)
- [Dartå†…å­˜ç®¡ç†æŒ‡å—](https://dart.dev/guides/memory)

### æµ‹è¯•æ–‡æ¡£
- [æ€§èƒ½æµ‹è¯•è¿è¡ŒæŒ‡å—](../performance/README.md)
- [æµ‹è¯•æœ€ä½³å®è·µ](../../test/testing-best-practices.md)

---

**ç»´æŠ¤è¯´æ˜**: æœ¬æ–‡æ¡£éœ€è¦éšç€ç³»ç»Ÿæ¼”è¿›æŒç»­æ›´æ–°ï¼Œç¡®ä¿ä¸å®é™…å®ç°ä¿æŒåŒæ­¥ã€‚

**æœ€åæ›´æ–°**: 2025-11-13 - Story 2.5 å®Œæˆæ—¶çš„å®Œæ•´æ¶æ„æ–‡æ¡£ã€‚